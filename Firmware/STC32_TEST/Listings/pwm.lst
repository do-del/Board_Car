C251 COMPILER V5.60.0,  pwm                                                                20/07/23  16:33:29  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE pwm
OBJECT MODULE PLACED IN .\Objects\pwm.obj
COMPILER INVOKED BY: C:\Keil_c251\C251\BIN\C251.EXE Src\pwm.c LARGE INTR2 BROWSE INCDIR(.\Inc) DEBUG PRINT(.\Listings\pw
                    -m.lst) TABS(2) OBJECT(.\Objects\pwm.obj) 

stmt  level    source

    1          #include "pwm.h"
    2          
    3          void pwm_init(void)
    4          {
    5   1        P1M0 &= ~0xc3; //0x11000011
    6   1        P1M0 |= 0xc3;
    7   1        P1M1 &= ~0xc3;
    8   1        P1PU |= 0xc3;
    9   1        
   10   1        PWMA_CCER1 = 0x00;
   11   1        PWMA_CCER2 = 0x00;
   12   1        PWMA_CCMR1 = 0x60;
   13   1        PWMA_CCMR4 = 0x60;
   14   1        
   15   1        PWMA_PSCRH = 0x00;
   16   1        PWMA_PSCRL = 0x17;  //24иокх
   17   1        
   18   1        PWMA_BKR = 0x80;
   19   1        PWMA_CR1 = 0x01;
   20   1      }
   21          
   22          void pwm1p_enable(void)
   23          {
   24   1        pwm1n_disable();
   25   1        PWM1N_PIN = 0;
   26   1        PWMA_CCER1 = 0x01;
   27   1        PWMA_ENO |= 0x01;
   28   1      }
   29          
   30          void pwm1n_enable(void)
   31          {
   32   1        pwm1p_disable();
   33   1        PWM1P_PIN = 0;
   34   1        PWMA_CCER1 = 0x01<<2;
   35   1        PWMA_ENO |= (0x01<<1);
   36   1      }
   37          
   38          void pwm4p_enable(void)
   39          {
   40   1        pwm4n_disable();
   41   1        PWM4N_PIN = 0;
   42   1        PWMA_CCER2 = 0x01 << 4;
   43   1        PWMA_ENO |= (0x01<<6);
   44   1      }
   45          
   46          void pwm4n_enable(void)
   47          {
   48   1        pwm4p_disable();
   49   1        PWM4P_PIN = 0;
   50   1        PWMA_CCER2 = 0x01 << 6;
   51   1        PWMA_ENO |= (0x01<<7);
   52   1      }
   53          
   54          void pwm1p_disable(void)
   55          {
   56   1        PWMA_ENO &= ~(0x01);
   57   1        PWM1P_PIN = 0;
   58   1      }
C251 COMPILER V5.60.0,  pwm                                                                20/07/23  16:33:29  PAGE 2   

   59          
   60          void pwm1n_disable(void)
   61          {
   62   1        PWMA_ENO &= ~(0x01<<1);
   63   1        PWM1N_PIN = 0;
   64   1      }
   65          
   66          void pwm4p_disable(void)
   67          {
   68   1        PWMA_ENO &= ~(0x01<<6);
   69   1        PWM4P_PIN = 0;
   70   1      }
   71          
   72          void pwm4n_disable(void)
   73          {
   74   1        PWMA_ENO &= ~(0x01<<7);
   75   1        PWM4N_PIN = 0;
   76   1      }
   77          
   78          void pwma_setcycle(unsigned int cycle)
   79          {
   80   1        PWMA_ARRH = (cycle>>8) & 0xff;
   81   1        PWMA_ARRL = cycle & 0xff;
   82   1      }
   83          
   84          void pwm1_setduty(unsigned int duty)
   85          {
   86   1        PWMA_CCR1H = (duty>>8) & 0xff;
   87   1        PWMA_CCR1L = duty & 0xff;
   88   1      }
   89          
   90          void pwm4_setduty(unsigned int duty)
   91          {
   92   1        PWMA_CCR4H = (duty>>8) & 0xff;
   93   1        PWMA_CCR4L = (duty>>8) & 0xff;
   94   1      }
   95          


Module Information          Static   Overlayable
------------------------------------------------
  code size            =       355     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =    ------     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =    ------     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
