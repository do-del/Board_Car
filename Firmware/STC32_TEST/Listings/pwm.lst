C251 COMPILER V5.60.0,  pwm                                                                21/07/23  15:14:51  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE pwm
OBJECT MODULE PLACED IN .\Objects\pwm.obj
COMPILER INVOKED BY: C:\Keil_c251\C251\BIN\C251.EXE Src\pwm.c LARGE INTR2 ROM(HUGE) BROWSE INCDIR(.\Inc) DEBUG PRINT(.\L
                    -istings\pwm.lst) TABS(2) OBJECT(.\Objects\pwm.obj) 

stmt  level    source

    1          #include "pwm.h"
    2          
    3          #if (USE_PWM == 1)
    4          
    5          void pwm_init(void)
    6          {
    7   1        P1M0 &= ~0xc3; //0x11000011
    8   1        P1M0 |= 0xc3;
    9   1        P1M1 &= ~0xc3;
   10   1        P1PU |= 0xc3;
   11   1        
   12   1        PWMA_CCER1 = 0x00;
   13   1        PWMA_CCER2 = 0x00;
   14   1        PWMA_CCMR1 = 0x60;
   15   1        PWMA_CCMR4 = 0x60;
   16   1        
   17   1        PWMA_PSCRH = 0x00;
   18   1        PWMA_PSCRL = 0x0b;  //24иокх
   19   1        
   20   1        PWMA_BKR = 0x80;
   21   1        PWMA_CR1 = 0x01;
   22   1        
   23   1        pwm1p_disable();
   24   1        pwm1n_disable();
   25   1        pwm4p_disable();
   26   1        pwm4n_disable();
   27   1      }
   28          
   29          void pwm1p_enable(void)
   30          {
   31   1        pwm1n_disable();
   32   1        delay_ms(1);
   33   1        PWMA_CCER1 = 0x03;
   34   1        PWMA_ENO |= 0x01;
   35   1      }
   36          
   37          void pwm1n_enable(void)
   38          {
   39   1        pwm1p_disable();
   40   1        delay_ms(1);
   41   1        PWMA_CCER1 = 0x03<<2;
   42   1        PWMA_ENO |= (0x01<<1);
   43   1      }
   44          
   45          void pwm4p_enable(void)
   46          {
   47   1        pwm4n_disable();
   48   1        delay_ms(1);
   49   1        PWMA_CCER2 = 0x03 << 4;
   50   1        PWMA_ENO |= (0x01<<6);
   51   1      }
   52          
   53          void pwm4n_enable(void)
   54          {
   55   1        pwm4p_disable();
   56   1        delay_ms(1);
   57   1        PWMA_CCER2 = 0x03 << 6;
   58   1        PWMA_ENO |= (0x01<<7);
C251 COMPILER V5.60.0,  pwm                                                                21/07/23  15:14:51  PAGE 2   

   59   1      }
   60          
   61          void pwm1p_disable(void)
   62          {
   63   1        PWMA_ENO &= ~(0x01);
   64   1        PWM1P_PIN = 1;
   65   1      }
   66          
   67          void pwm1n_disable(void)
   68          {
   69   1        PWMA_ENO &= ~(0x01<<1);
   70   1        PWM1N_PIN = 1;
   71   1      }
   72          
   73          void pwm4p_disable(void)
   74          {
   75   1        PWMA_ENO &= ~(0x01<<6);
   76   1        PWM4P_PIN = 1;
   77   1      }
   78          
   79          void pwm4n_disable(void)
   80          {
   81   1        PWMA_ENO &= ~(0x01<<7);
   82   1        PWM4N_PIN = 1;
   83   1      }
   84          
   85          void pwma_setcycle(unsigned int cycle)
   86          {
   87   1        PWMA_ARRH = (cycle>>8) & 0xff;
   88   1        PWMA_ARRL = cycle & 0xff;
   89   1      }
   90          
   91          void pwm1_setduty(unsigned int duty)
   92          {
   93   1        PWMA_CCR1H = (duty>>8) & 0xff;
   94   1        PWMA_CCR1L = duty & 0xff;
   95   1      }
   96          
   97          void pwm4_setduty(unsigned int duty)
   98          {
   99   1        PWMA_CCR4H = (duty>>8) & 0xff;
  100   1        PWMA_CCR4L = duty & 0xff;
  101   1      }
  102          
  103          #endif


Module Information          Static   Overlayable
------------------------------------------------
  code size            =    ------     ------
  ecode size           =       398     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =    ------     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =    ------     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
